syntax = "proto3";

// Пространство имен для сгенерированного C# кода
option csharp_namespace = "BackupServer";

// Пакет для gRPC сервиса
package backup;

// Сервис для получения резервной копии1q
service Backup {
  // Получение резервной копии в потоковом режиме
  rpc GetBackup (BackupRequest) returns (stream BackupResponse) {}

  // Методы проверки доступности сервера
  rpc Ping (PingRequest) returns (PingResponse) {}
  rpc CheckHealth (HealthRequest) returns (HealthResponse) {}
}

// Запрос для получения резервной копии
message BackupRequest {
  string backup_id = 1; // Идентификатор бэкапа
}

message BackupResponse {
  oneof response {
    BackupStatus status = 1;
    bytes data = 2;
  }
}

message BackupStatus {
  string status_message = 1; // Сообщение о текущем состоянии
  int32 progress = 2;        // Процент выполнения (0-100)
}

message FileInfo {
  string file_path = 1;      // Путь к файлу
  string file_name = 2;      // Имя файла
  int64 file_size = 3;       // Размер файла
}



message PingRequest {
}

message PingResponse {
    string message = 1; // Например, "Pong"
}

message HealthRequest {
}

message HealthResponse {
    string status = 1; // Например, "Healthy"
}